function emotionApi(){this.m_LastMethod=null,this.m_MakeDropdown=null,this.m_ModelDropdown=null,this.m_VariantDropdown=null,this.m_FuelDropdown=null,this.attachAfterLoad=function(){var e=!0;null!=document.getElementById("etWidget_obsoleteBrowser")&&"1"==document.getElementById("etWidget_obsoleteBrowser").value&&(e=!1),e&&window.addEventListener("load",this._OnDocumentLoad,!1)},this.execute=function(e,t,o,n){var i=null,s=this,d={et_method:null};"undefined"!=typeof e&&(this.m_LastMethod=e),null!=this.m_LastMethod?("undefined"!=typeof n&&(d=n),d.et_method=this.m_LastMethod,o.setAttribute("disabled",!0),i=new XMLHttpRequest,i.onreadystatechange=function(){if(4==i.readyState){if(200!=i.status&&304!=i.status)return void s.msg("Unexpected server reply ("+i.status+")");l_Response=JSON.parse(i.responseText),l_Response.Success?(t(l_Response,o),o.removeAttribute("disabled")):(l_Error=document.createElement("p"),l_Error.innerHTML=l_Response.ErrorMessage,l_Error.className="etError",o.parentNode.appendChild(l_Error))}},i.open("POST","PHP/json.tunnel.php",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(this._stringify(d))):this.msg("No method to execute has been specified!")},this._OnDocumentLoad=function(){i_emotionApi._init()},this._init=function(){this.m_MakeDropdown=document.getElementById("etWidget_make"),this.m_ModelDropdown=document.getElementById("etWidget_model"),this.m_FuelDropdown=document.getElementById("etWidget_fuel"),this.m_VariantDropdown=document.getElementById("etWidget_variant"),this.m_MakeDropdown.addEventListener("change",this._EventDispatcher,!1),this.m_ModelDropdown.addEventListener("change",this._EventDispatcher,!1),this.m_FuelDropdown.addEventListener("change",this._EventDispatcher,!1),this.m_VariantDropdown.addEventListener("change",this._EventDispatcher,!1),this.m_MakeDropdown.childNodes[0].innerHTML="- Please select -",this.m_ModelDropdown.childNodes[0].innerHTML="- Please select above -",this.m_FuelDropdown.childNodes[0].innerHTML="- Please select above -",this.m_VariantDropdown.childNodes[0].innerHTML="- Please select above -",this.LoadMakes()},this._stringify=function(e){var t="";for(key in e)t+=key+"="+e[key]+"&";return t.substr(0,t.length-1)},this.LoadMakes=function(){this.execute("make",this._populateDropdown,this.m_MakeDropdown)},this.LoadModels=function(){this.execute("model",this._populateDropdown,this.m_ModelDropdown,{makeId:this.m_MakeDropdown.options[this.m_MakeDropdown.selectedIndex].value})},this.LoadFuels=function(){this.execute("fuel",this._populateDropdown,this.m_FuelDropdown,{modelId:this.m_ModelDropdown.options[this.m_ModelDropdown.selectedIndex].value})},this.LoadVariants=function(){this.execute("variant",this._populateDropdown,this.m_VariantDropdown,{modelId:this.m_ModelDropdown.options[this.m_ModelDropdown.selectedIndex].value,fuelId:this.m_FuelDropdown.options[this.m_FuelDropdown.selectedIndex].value})},this.LoadOrderForm=function(){this.msg("Not implemented")},this.OnMakeChange=function(){this.LoadModels(),this.m_FuelDropdown.selectedIndex=0,this.m_FuelDropdown.setAttribute("disabled",!0),this.m_VariantDropdown.selectedIndex=0,this.m_VariantDropdown.setAttribute("disabled",!0)},this.OnModelChange=function(){this.LoadFuels(),this.m_VariantDropdown.selectedIndex=0,this.m_VariantDropdown.setAttribute("disabled",!0)},this.OnFuelChange=function(){this.LoadVariants()},this.OnVariantChange=function(){this.LoadOrderForm()},this._EventDispatcher=function(e){e.srcElement==i_emotionApi.m_MakeDropdown&&i_emotionApi.OnMakeChange(e),e.srcElement==i_emotionApi.m_ModelDropdown&&i_emotionApi.OnModelChange(e),e.srcElement==i_emotionApi.m_FuelDropdown&&i_emotionApi.OnFuelChange(e),e.srcElement==i_emotionApi.m_VariantDropdown&&i_emotionApi.OnVariantChange(e)},this.msg=function(e){"undefined"!=typeof console.log?console.log("Emotion Tuning Widget",e):(e="Emotion Tuning Widget:"+e,alert(e))},this._populateDropdown=function(e,t){for(var o=null;t.firstChild;)t.removeChild(t.firstChild);for(l_i in e.Items)o=document.createElement("option"),o.value=e.Items[l_i].Value,o.innerHTML=e.Items[l_i].Text,t.appendChild(o)}}var i_emotionApi;i_emotionApi=new emotionApi,i_emotionApi.attachAfterLoad();
//# sourceMappingURL=https://emotion-tuning.com/SDK/js/emotionApi.min.map